DROP VIEW "onlypaws"."posts_view";--> statement-breakpoint
ALTER TABLE "onlypaws"."comments" ADD COLUMN "main_comment_id" uuid;--> statement-breakpoint
ALTER TABLE "onlypaws"."comments" ADD CONSTRAINT "comments_main_comment_id_comments_id_fk" FOREIGN KEY ("main_comment_id") REFERENCES "onlypaws"."comments"("id") ON DELETE cascade ON UPDATE no action;--> statement-breakpoint
CREATE VIEW "onlypaws"."posts_view" AS (select "onlypaws"."post_analytics"."likes", "onlypaws"."posts"."id", "onlypaws"."posts"."user_id", "onlypaws"."posts"."tags", "onlypaws"."posts"."description", "onlypaws"."posts"."media_url", "onlypaws"."posts"."created_at", "onlypaws"."post_analytics"."comments", "onlypaws"."post_analytics"."views", "onlypaws"."user_info"."dog_name", "onlypaws"."user_info"."name", "onlypaws"."user_info"."user_avatar", "onlypaws"."user_info"."dog_avatar" from "onlypaws"."posts" left join "onlypaws"."user_info" on "onlypaws"."user_info"."user_id" = "onlypaws"."posts"."user_id" left join "onlypaws"."post_analytics" on "onlypaws"."post_analytics"."post_id" = "onlypaws"."posts"."id" order by "onlypaws"."posts"."created_at" desc);